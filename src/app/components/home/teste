<po-step p-label="Seleção" [p-can-active-next-step]="canActiveNextStep.bind(this)" >

    <div class='hero'>
      <div class="homepage">

        <po-widget class="po-md-12" [p-height]="alturaStepper">

          <div class="filtros-container">

            <po-combo p-label="Destinatário" [ngModel]="codTecnico" (ngModelChange)="codTecnico = $event"
              p-icon="bi bi-person-workspace" [p-options]="listaTecnicos" (p-change)="onEmitenteChange($event)"
              [p-placeholder]="loadTecnico" p-clean="true" [p-clean]="true">
              <ng-template p-combo-option-template let-option>
                <div class="po-row">
                  <po-icon class="po-sm-2 po-md-3 po-lg-1" p-size="sm" p-icon="bi bi-person-workspace"></po-icon>
                  <div class="po-sm-10 po-md-9 po-lg-11">
                    <div class="po-font-text-large-bold">{{ option.label }}</div>
                    <div class="po-font-text-smaller">Emitente: {{ option.value }}</div>
                  </div>
                </div>
              </ng-template>
            </po-combo>            
          
            <po-combo p-label="Transportadora" [ngModel]="codTransp" (ngModelChange)="codTransp = $event"
              p-icon="bi bi-person-workspace" [p-options]="listaTransp" (p-change)="onTranspChange($event)"
              [p-placeholder]="loadTransp" p-clean="true" [p-clean]="true">
              <ng-template p-combo-option-template let-option>
                <div class="po-row">
                  <po-icon class="po-sm-2 po-md-3 po-lg-1" p-size="sm" p-icon="bi bi-person-workspace"></po-icon>
                  <div class="po-sm-10 po-md-9 po-lg-11">
                    <div class="po-font-text-large-bold">{{ option.label }}</div>
                    <div class="po-font-text-smaller">Transportadora: {{ option.value }}</div>
                  </div>
                </div>
              </ng-template>
            </po-combo>

            <po-combo p-label="Prioridade" [ngModel]="indPrioridade" (ngModelChange)="codTransp = $event"
                      p-icon="bi bi-person-workspace" (p-change)="onPrioridadeChange($event)"
                      [p-placeholder]="loadPrioridade" p-clean="true" [p-clean]="true"
                                      [p-options]="[{ value: 'D0' }, 
                                                    { value: 'D1' },
                                                    { value: 'D2' }, 
                                                    { value: 'D3' },
                                                    { value: 'D4' }, 
                                                    { value: 'D5' },
                                                    { value: 'D6' }, 
                                                    { value: 'D7' },
                                                    { value: 'D8' }]"></po-combo>

            <!--
            <po-combo  p-label="Modal" [ngModel]="codTransp" (ngModelChange)="codTransp = $event"
              p-icon="bi bi-person-workspace" [p-options]="listaTransp" (p-change)="onTranspChange($event)"
              [p-placeholder]="loadTransp" p-clean="true" [p-clean]="true">
              <ng-template p-combo-option-template let-option>
                <div class="po-row">
                  <po-icon class="po-sm-2 po-md-3 po-lg-1" p-size="sm" p-icon="bi bi-person-workspace"></po-icon>
                  <div class="po-sm-10 po-md-9 po-lg-11">
                    <div class="po-font-text-large-bold">{{ option.label }}</div>
                    <div class="po-font-text-smaller">Transportadora: {{ option.value }}</div>
                  </div>
                </div>
              </ng-template>
            </po-combo>
            -->
            <po-button p-tooltip="Atualizar Dados" p-icon="bi bi-arrow-clockwise"      style="height: 10px;"></po-button>
            <po-button p-tooltip="Próximo Passo"   p-icon="bi bi-chevron-double-right" style="height: 10px;" (click)="onProximoStep()"></po-button>
          </div>

          <p style="font-size: 15px; font-weight: bold; margin-bottom: -30px;">
          <po-button p-tooltip="Exportar para o Excel" p-icon="an an-microsoft-excel-logo" (p-click)="this.onExportarSelecaoExcel()" style="height: 10px;"></po-button>  
          </p>


          <po-table #ttDadosConc  [p-items]="listaSelecaoFiltrada" 
                                  [p-columns]="colunasSelecao" 
                                  [p-selectable]="true"
                                  [p-single-select]="false"
                                  
                                  (p-selected)="changeOptions($event)"
                                  (p-unselected)="changeOptions($event)"
                                  (p-all-selected)="changeOptions($event)"
                                  (p-all-unselected)="changeOptions($event)"

                                  [p-striped]="true"
                                  p-sort="true"
                                  [p-sort]="true" 
                                  [p-hide-table-search]="false"
                                  [p-hide-columns-manager]="true" 
                                  p-container="true" 
                                  
                                  [p-literals]="customLiterals"
                                  [p-height]="alturaGrid"
                                  [p-loading]="loadTela"
                                  p-components-size="small"
                                ></po-table>
          <!-- 
                      
                      [p-literals]="customLiterals"
                      (p-row-selected)="selecionarItem($event)"                      
                      -->

          <div class="combo-com-botao" style="justify-content: space-between;">

            <div class="card">
              <div class="face face1">
                <div class="content">
                  <i class="bi bi-hand-index" style="font-size: 20px;"> Pedidos</i>
                  <h3>{{totSelecionado[0]}}</h3>
                </div>
              </div>
             
              <div class="face face2">
                <div class="content">
                  <p>Pedidos Selecionados</p>                  
                </div>
              </div>
            </div>

            <div class="card">
              <div class="face face1" style="background-color: #0088b9">
                <div class="content">
                  <i class="bi bi-clipboard-check" style="font-size: 20px;"> Qtd.Itens</i>
                  <h3>{{totSelecionado[1]}}</h3>
                </div>
              </div>
             
              <div class="face face2">
                <div class="content">
                  <p>Qtd. de Itens Totais</p>                  
                </div>
              </div>
            </div>
          

            <div class="card">
                <div class="face face1" style="background-color: #a51f66">
                  <div class="content">
                    <i class="bi bi-building-add" style="font-size: 20px;"> Vl.Itens</i>
                    <h3>{{totSelecionado[2] | currency:'BRL':'symbol':'1.2-2'}}</h3>
                  </div>
                </div>
              
                <div class="face face2">
                  <div class="content">
                    <p>Vl. Total por Itens</p>                  
                  </div>
                </div>
              </div>

            <div class="card">
                <div class="face face1" style="background-color: #be3e37">
                  <div class="content">
                    <i class="bi bi-truck" style="font-size: 20px;"> Vl.Frete</i>
                    <h3>{{totSelecionado[3]}}</h3>
                  </div>
                </div>
              
                <div class="face face2">
                  <div class="content">
                    <p>Vl. do Frete Consolidado</p>                  
                  </div>
                </div>
              </div>
            
              <div class="card">
                <div class="face face1" style="background-color: #f99e1d">
                  <div class="content">
                    <i class="bi bi-clock-history" style="font-size: 20px;"> Transit Time</i>
                    <h3>{{totSelecionado[4]}}</h3>
                  </div>
                </div>
              
                <div class="face face2">
                  <div class="content">
                    <p>Tempo de Entrega</p>                  
                  </div>
                </div>
              </div>
          </div>
          
          <h5 class="versao">
            <div style="font-size: 8px;">
              Atualizado em: {{ultatt}}
            </div>
          </h5>
        </po-widget>

      </div>
      
    </div>
    
  </po-step>